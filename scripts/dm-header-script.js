(function(){
    'use strict';
    console.log('reading js');

    const displayInput = document.querySelector('#animated-header');
    let display = document.querySelector('.dm-display');
    let displayMatrix = [];
    let charSpace = 1;
    const font = {
            "a": [
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0011111000",
                 "0111111100",
                 "0010001110",
                 "0000000110",
                 "0011111110",
                 "0111111110",
                 "1110000110",
                 "1100000110",
                 "1110001110",
                 "0111111111",
                 "0011110011",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "b": [
                 "110000000",
                 "110000000",
                 "110000000",
                 "110111100",
                 "111111110",
                 "111000111",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "111000111",
                 "111111110",
                 "110111100",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "c": [
                 "000000000",
                 "000000000",
                 "000000000",
                 "001111100",
                 "011111110",
                 "111000111",
                 "110000010",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000010",
                 "111000111",
                 "011111110",
                 "001111100",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "d": [
                 "000000011",
                 "000000011",
                 "000000011",
                 "001111011",
                 "011111111",
                 "111000111",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "111000111",
                 "011111111",
                 "001111011",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "e": [
                 "000000000",
                 "000000000",
                 "000000000",
                 "001111100",
                 "011111110",
                 "111000111",
                 "110000011",
                 "111111111",
                 "111111111",
                 "110000000",
                 "110000010",
                 "111000111",
                 "011111110",
                 "001111100",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "f": [
                 "000111",
                 "001111",
                 "001100",
                 "111111",
                 "111111",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "000000",
                 "000000",
                 "000000",
                 "000000"
            ],
            "g": [
                 "000000000",
                 "000000000",
                 "000000011",
                 "000000111",
                 "001111100",
                 "011111110",
                 "011000110",
                 "011000110",
                 "011111110",
                 "001111100",
                 "010000000",
                 "110000000",
                 "111111110",
                 "011111111",
                 "010000011",
                 "110000011",
                 "111111111",
                 "011111110"
            ],
            "h": [
                 "110000000",
                 "110000000",
                 "110000000",
                 "110111100",
                 "111111110",
                 "111000111",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "i": [
                 "11",
                 "11",
                 "00",
                 "11",
                 "11",
                 "11",
                 "11",
                 "11",
                 "11",
                 "11",
                 "11",
                 "11",
                 "11",
                 "11",
                 "00",
                 "00",
                 "00",
                 "00"
            ],
            "j": [
                 "0011",
                 "0011",
                 "0000",
                 "0011",
                 "0011",
                 "0011",
                 "0011",
                 "0011",
                 "0011",
                 "0011",
                 "0011",
                 "0011",
                 "0011",
                 "0011",
                 "0011",
                 "0011",
                 "1111",
                 "1110"
            ],
            "k": [
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000111",
                 "110001110",
                 "110011100",
                 "110111000",
                 "111111000",
                 "111111100",
                 "111001100",
                 "110001110",
                 "110000110",
                 "110000111",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "l": [
                 "1100",
                 "1100",
                 "1100",
                 "1100",
                 "1100",
                 "1100",
                 "1100",
                 "1100",
                 "1100",
                 "1100",
                 "1100",
                 "1100",
                 "1111",
                 "0111",
                 "0000",
                 "0000",
                 "0000",
                 "0000"
            ],
            "m": [
                 "000000000000",
                 "000000000000",
                 "000000000000",
                 "110110011100",
                 "111111111110",
                 "111011110111",
                 "110001100011",
                 "110001100011",
                 "110001100011",
                 "110001100011",
                 "110001100011",
                 "110001100011",
                 "110001100011",
                 "110001100011",
                 "000000000000",
                 "000000000000",
                 "000000000000",
                 "000000000000"
            ],
            "n": [
                 "000000000",
                 "000000000",
                 "000000000",
                 "110111100",
                 "111111110",
                 "111000111",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "o": [
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0011111000",
                 "0111111100",
                 "1110001110",
                 "1100000110",
                 "1100000110",
                 "1100000110",
                 "1100000110",
                 "1100000110",
                 "1110001110",
                 "0111111100",
                 "0011111000",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "p": [
                 "000000000",
                 "000000000",
                 "000000000",
                 "110111100",
                 "111111110",
                 "111000111",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "111000111",
                 "111111110",
                 "110111100",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000"
            ],
            "q": [
                 "000000000",
                 "000000000",
                 "000000000",
                 "001111011",
                 "011111111",
                 "111000111",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "111000111",
                 "011111111",
                 "001111011",
                 "000000011",
                 "000000011",
                 "000000011",
                 "000000011"
            ],
            "r": [
                 "0000000",
                 "0000000",
                 "0000000",
                 "1101111",
                 "1111111",
                 "1110000",
                 "1100000",
                 "1100000",
                 "1100000",
                 "1100000",
                 "1100000",
                 "1100000",
                 "1100000",
                 "1100000",
                 "0000000",
                 "0000000",
                 "0000000",
                 "0000000"
            ],
            "s": [
                 "000000000",
                 "000000000",
                 "000000000",
                 "001111100",
                 "011111110",
                 "111000100",
                 "110000000",
                 "111111100",
                 "011111110",
                 "000000111",
                 "000000011",
                 "010000111",
                 "111111110",
                 "011111100",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "t": [
                 "000000",
                 "001100",
                 "001100",
                 "111111",
                 "111111",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001111",
                 "000111",
                 "000000",
                 "000000",
                 "000000",
                 "000000"
            ],
            "u": [
                 "000000000",
                 "000000000",
                 "000000000",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "110000011",
                 "111000111",
                 "011111111",
                 "001111011",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "v": [
                 "000000000",
                 "000000000",
                 "000000000",
                 "110000011",
                 "110000011",
                 "111000111",
                 "011000110",
                 "011000110",
                 "011101110",
                 "001101100",
                 "001101100",
                 "001111100",
                 "000111000",
                 "000111000",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "w": [
                 "0000000000000",
                 "0000000000000",
                 "0000000000000",
                 "1100011100011",
                 "1100011100011",
                 "1100011100011",
                 "1110111110111",
                 "0110110110110",
                 "0110110110110",
                 "0110110110110",
                 "0111110111110",
                 "0011100011100",
                 "0011100011100",
                 "0011100011100",
                 "0000000000000",
                 "0000000000000",
                 "0000000000000",
                 "0000000000000"
            ],
            "x": [
                 "00000000000",
                 "00000000000",
                 "00000000000",
                 "11100000111",
                 "01110001110",
                 "00110001100",
                 "00111011100",
                 "00011111000",
                 "00001110000",
                 "00011111000",
                 "00111011100",
                 "01110001110",
                 "01110001110",
                 "11100000111",
                 "00000000000",
                 "00000000000",
                 "00000000000",
                 "00000000000"
            ],
            "y": [
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "1100000011",
                 "1100000011",
                 "1110000111",
                 "0110000110",
                 "0111001110",
                 "0011001100",
                 "0011111100",
                 "0001111000",
                 "0001111000",
                 "0000110000",
                 "0000110000",
                 "0001110000",
                 "0001100000",
                 "0111100000",
                 "0111000000"
            ],
            "z": [
                 "000000000",
                 "000000000",
                 "000000000",
                 "111111111",
                 "111111111",
                 "000000111",
                 "000001110",
                 "000011100",
                 "000111000",
                 "001110000",
                 "011100000",
                 "111000000",
                 "111111111",
                 "111111111",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "A": [
                 "00001110000",
                 "00001110000",
                 "00011111000",
                 "00011011000",
                 "00011011000",
                 "00111011100",
                 "00110001100",
                 "00110001100",
                 "01111111110",
                 "01111111110",
                 "01100000110",
                 "11100000111",
                 "11000000011",
                 "11000000011",
                 "00000000000",
                 "00000000000",
                 "00000000000",
                 "00000000000"
            ],
            "B": [
                 "1111111000",
                 "1111111100",
                 "1100001110",
                 "1100000110",
                 "1100000110",
                 "1100001110",
                 "1111111100",
                 "1111111110",
                 "1100000111",
                 "1100000011",
                 "1100000011",
                 "1100000111",
                 "1111111110",
                 "1111111100",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "C": [
                 "0001111100",
                 "0011111110",
                 "0111000111",
                 "1110000010",
                 "1100000000",
                 "1100000000",
                 "1100000000",
                 "1100000000",
                 "1100000000",
                 "1100000000",
                 "1110000010",
                 "0111000111",
                 "0011111110",
                 "0001111100",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "D": [
                 "1111111000",
                 "1111111100",
                 "1100001110",
                 "1100000111",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000111",
                 "1100001110",
                 "1111111100",
                 "1111111000",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "E": [
                 "111111111",
                 "111111111",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "111111111",
                 "111111111",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "111111111",
                 "111111111",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "F": [
                 "111111111",
                 "111111111",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "111111110",
                 "111111110",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "G": [
                 "00111111100",
                 "01111111110",
                 "11100000111",
                 "11000000010",
                 "11000000000",
                 "11000000000",
                 "11000011111",
                 "11000011111",
                 "11000000011",
                 "11000000011",
                 "11000000111",
                 "11100001111",
                 "01111111011",
                 "00111110011",
                 "00000000000",
                 "00000000000",
                 "00000000000",
                 "00000000000"
            ],
            "H": [
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1111111111",
                 "1111111111",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "I": [
                 "111111",
                 "111111",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "001100",
                 "111111",
                 "111111",
                 "000000",
                 "000000",
                 "000000",
                 "000000"
            ],
            "J": [
                 "011111111",
                 "011111111",
                 "000000011",
                 "000000011",
                 "000000011",
                 "000000011",
                 "000000011",
                 "000000011",
                 "000000011",
                 "000000011",
                 "010000011",
                 "111000111",
                 "011111110",
                 "001111100",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "K": [
                 "11000000111",
                 "11000001110",
                 "11000011100",
                 "11000111000",
                 "11001110000",
                 "11011110000",
                 "11111110000",
                 "11110111000",
                 "11100011000",
                 "11000011100",
                 "11000001100",
                 "11000001110",
                 "11000000110",
                 "11000000111",
                 "00000000000",
                 "00000000000",
                 "00000000000",
                 "00000000000"
            ],
            "L": [
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "110000000",
                 "111111111",
                 "111111111",
                 "000000000",
                 "000000000",
                 "000000000",
                 "000000000"
            ],
            "M": [
                 "11000000011",
                 "11100000111",
                 "11100000111",
                 "11110001111",
                 "11110001111",
                 "11111011111",
                 "11011011011",
                 "11011111011",
                 "11001110011",
                 "11001110011",
                 "11000100011",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "00000000000",
                 "00000000000",
                 "00000000000",
                 "00000000000"
            ],
            "N": [
                 "1110000011",
                 "1111000011",
                 "1111000011",
                 "1111100011",
                 "1101100011",
                 "1101110011",
                 "1100110011",
                 "1100111011",
                 "1100011011",
                 "1100011111",
                 "1100001111",
                 "1100001111",
                 "1100000111",
                 "1100000111",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "O": [
                 "00111111100",
                 "01111111110",
                 "11100000111",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "11100000111",
                 "01111111110",
                 "00111111100",
                 "00000000000",
                 "00000000000",
                 "00000000000",
                 "00000000000"
            ],
            "P": [
                 "1111111100",
                 "1111111110",
                 "1100000111",
                 "1100000011",
                 "1100000011",
                 "1100000111",
                 "1111111110",
                 "1111111100",
                 "1100000000",
                 "1100000000",
                 "1100000000",
                 "1100000000",
                 "1100000000",
                 "1100000000",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "Q": [
                 "00111111100",
                 "01111111110",
                 "11100000111",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "11000000011",
                 "11100000111",
                 "01111111110",
                 "00111111100",
                 "00000110000",
                 "00000111100",
                 "00000011100",
                 "00000000000",
                 "00000000000"
            ],
            "R": [
                 "1111111100",
                 "1111111110",
                 "1100000111",
                 "1100000011",
                 "1100000011",
                 "1100000111",
                 "1111111110",
                 "1111111100",
                 "1100011000",
                 "1100011100",
                 "1100001100",
                 "1100001110",
                 "1100000110",
                 "1100000111",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "S": [
                 "0011111100",
                 "0111111110",
                 "1110000100",
                 "1100000000",
                 "1100000000",
                 "1111000000",
                 "0111111000",
                 "0001111110",
                 "0000001111",
                 "0000000011",
                 "0100000011",
                 "1110000111",
                 "0111111110",
                 "0011111100",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "T": [
                 "1111111111",
                 "1111111111",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "U": [
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1100000011",
                 "1110000111",
                 "0111111110",
                 "0011111100",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "V": [
                 "11000000011",
                 "11000000011",
                 "11100000111",
                 "01100000110",
                 "01100000110",
                 "01110001110",
                 "00110001100",
                 "00110001100",
                 "00111011100",
                 "00011011000",
                 "00011011000",
                 "00011111000",
                 "00001110000",
                 "00001110000",
                 "00000000000",
                 "00000000000",
                 "00000000000",
                 "00000000000"
            ],
            "W": [
                 "1100011100011",
                 "1100011100011",
                 "1100011100011",
                 "1100011100011",
                 "1110111110111",
                 "1110111110111",
                 "0110110110110",
                 "0110110110110",
                 "0110110110110",
                 "0111110111110",
                 "0111110111110",
                 "0011100011100",
                 "0011100011100",
                 "0011100011100",
                 "0000000000000",
                 "0000000000000",
                 "0000000000000",
                 "0000000000000"
            ],
            "X": [
                 "11100000111",
                 "01100000110",
                 "01110001110",
                 "00111011100",
                 "00011011000",
                 "00011111000",
                 "00001110000",
                 "00001110000",
                 "00011111000",
                 "00111011100",
                 "00110001100",
                 "01110001110",
                 "01100000110",
                 "11100000111",
                 "00000000000",
                 "00000000000",
                 "00000000000",
                 "00000000000"
            ],
            "Y": [
                 "1110000111",
                 "0110000110",
                 "0111001110",
                 "0011001100",
                 "0011111100",
                 "0001111000",
                 "0001111000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000110000",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            "Z": [
                 "1111111111",
                 "1111111111",
                 "0000001110",
                 "0000001110",
                 "0000011100",
                 "0000111000",
                 "0000111000",
                 "0001110000",
                 "0001110000",
                 "0011100000",
                 "0111000000",
                 "0111000000",
                 "1111111111",
                 "1111111111",
                 "0000000000",
                 "0000000000",
                 "0000000000",
                 "0000000000"
            ],
            " ": [
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000",
                "000000"
           ]
    };

    function createDiv(className){
        let newDiv = document.createElement('div');
        newDiv.classList.add(className);
        return newDiv;
    }

    function buildDisplay(displayWidth){
        for(let i = 0; i < displayWidth; i++){
            let newCol = createDiv('dm-col');
            for(let j = 0; j < font.A.length; j++){
                let cell = createDiv('dm-cell');
                let dot = createDiv('dm-dot');
                dot.style.transitionDelay = `${Math.round(Math.random() * 200) + 15 * i}ms`;
                newCol.appendChild(cell).appendChild(dot);
            }
            display.appendChild(newCol);
        }

        for(let i = 0; i < displayWidth; i++){
            displayMatrix.push(document.querySelectorAll(`.dm-display .dm-col:nth-of-type(${i + 1}) .dm-dot`));
        }
    }

    function updateDisplay(message){
        displayInput.textContent = message;

        for(let i = 0; i < displayMatrix.length; i++){
            for(let j = 0; j < displayMatrix[0].length; j++){
                displayMatrix[i][j].classList.remove('active');
            }
        }

        for(let i = 0; i < font.A.length; i++){
            let offset = 0;
            for(let j = 0; j < message.length; j++){
                for(let k = 0; k < font[message[j]][0].length; k++){
                    if(font[message[j]][i][k] == 1){
                        displayMatrix[k + offset][i].classList.add('active');
                    }
                }
                offset += font[message[j]][0].length + charSpace;
            }
        }
    }

    function dmSlideshow(duration){
        let headings = ['Studio Flora'];
        let slide = 0;

        function nextSlide(){
            updateDisplay(headings[slide]);
            slide++;
            if(slide == headings.length){
                slide = 0
            }
        }

        nextSlide()
     //    if(headings.length > 1){ setInterval(nextSlide, duration) };
    }

    buildDisplay(110);
    updateDisplay('');
    setTimeout(function(){
          dmSlideshow(4000);
    }, 600);
}());